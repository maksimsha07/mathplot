{"remainingRequest":"C:\\Users\\Admin\\source\\repos\\MathPlot\\MathPlot\\mathplot.ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Admin\\source\\repos\\MathPlot\\MathPlot\\mathplot.ui\\src\\views\\User\\User.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Admin\\source\\repos\\MathPlot\\MathPlot\\mathplot.ui\\src\\views\\User\\User.vue","mtime":1638388492673},{"path":"C:\\Users\\Admin\\source\\repos\\MathPlot\\MathPlot\\mathplot.ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Admin\\source\\repos\\MathPlot\\MathPlot\\mathplot.ui\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Admin\\source\\repos\\MathPlot\\MathPlot\\mathplot.ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Admin\\source\\repos\\MathPlot\\MathPlot\\mathplot.ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgZGF0YSgpew0KICAgICAgICByZXR1cm57DQogICAgICAgICAgICBVc2VyOiBudWxsLA0KICAgICAgICAgICAgbmV3UGFzc3dvcmQgOiAiIiwNCiAgICAgICAgICAgIGZpbGU6IG51bGwsDQogICAgICAgICAgICBtYWluUHJvcHM6IHt3aWR0aDogMjAwLCBoZWlnaHQ6IDIwMH0sDQogICAgICAgICAgICAgZGVmYXVsdFByb3BzOiB7IGJsYW5rOiB0cnVlLCBibGFua0NvbG9yOiAnIzc3NycsIHdpZHRoOiAyMDAsIGhlaWdodDogMjAwIH0NCiAgICAgICAgfQ0KICAgIH0sDQogICAgbW91bnRlZCgpew0KICAgICAgICB0aGlzLkdldFVzZXJzKCkNCiAgICB9LA0KICAgIG1ldGhvZHM6ew0KICAgICAgICBhc3luYyBHZXRVc2Vycygpew0KICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgiaHR0cDovL2xvY2FsaG9zdDo1NjA2My9hcGkvdXNlci8iICsgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgibG9naW4iKSwNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLA0KICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsiQWNjZXB0IjogImFwcGxpY2F0aW9uL2pzb24ifQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBpZihyZXNwb25zZS5zdGF0dXMgPj0yMDAgJiYgcmVzcG9uc2Uuc3RhdHVzIDw9IDI5OSl7DQogICAgICAgICAgICAgICAgdGhpcy5Vc2VyID0gYXdhaXQgcmVzcG9uc2UuanNvbigpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2Uuc3RhdHVzVGV4dCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIG9uRmlsZUNoYW5nZShlKSB7DQogICAgICAgICAgICB0aGlzLmZpbGUgPSBlLnRhcmdldC5maWxlc1swXTsNCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgU2F2ZVVzZXIoKXsNCiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goImh0dHA6Ly9sb2NhbGhvc3Q6NTYwNjMvYXBpL3VzZXIiLCB7DQogICAgICAgICAgICAgICAgbWV0aG9kOiAiUFVUIiwNCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICJBY2NlcHQiOiAiYXBwbGljYXRpb24vanNvbiIsICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIgfSwNCiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7DQogICAgICAgICAgICAgICAgICAgIElkIDp0aGlzLlVzZXJbJ2lkJ10sDQogICAgICAgICAgICAgICAgICAgIEZpcnN0TmFtZSA6IHRoaXMuVXNlclsnZmlyc3ROYW1lJ10sDQogICAgICAgICAgICAgICAgICAgIExhc3ROYW1lOiB0aGlzLlVzZXJbJ2xhc3ROYW1lJ10sDQogICAgICAgICAgICAgICAgICAgIExvZ2luOiB0aGlzLlVzZXJbJ2xvZ2luJ10sDQogICAgICAgICAgICAgICAgICAgIEdlbnJlOiB0aGlzLlVzZXJbJ2dlbnJlJ10sDQogICAgICAgICAgICAgICAgICAgIEVtYWlsOiB0aGlzLlVzZXJbJ2VtYWlsJ10sDQogICAgICAgICAgICAgICAgICAgIFBob25lOiB0aGlzLlVzZXJbJ3Bob25lJ10sDQogICAgICAgICAgICAgICAgICAgIFBhc3N3b3JkOiB0aGlzLm5ld1Bhc3N3b3JkID09ICIiP3RoaXMuVXNlclsncGFzc3dvcmQnXTp0aGlzLm5ld1Bhc3N3b3JkICwNCiAgICAgICAgICAgICAgICAgICAgSW1hZ2VQYXRoOiBudWxsDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgaWYocmVzcG9uc2Uuc3RhdHVzID49MjAwICYmIHJlc3BvbnNlLnN0YXR1cyA8PSAyOTkpew0KICAgICAgICAgICAgICAgIHRoaXMuVXNlciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuVXNlcikNCiAgICAgICAgICAgICAgICBpZih0aGlzLmZpbGUgIT0gbnVsbCl7DQogICAgICAgICAgICAgICAgICAgIGxldCBmb3JtZGF0YSA9IG5ldyBGb3JtRGF0YSgpDQogICAgICAgICAgICAgICAgICAgIGZvcm1kYXRhLmFwcGVuZCgnZmlsZScsdGhpcy5maWxlKQ0KICAgICAgICAgICAgICAgICAgICBmb3JtZGF0YS5hcHBlbmQoJ2xvZ2luJyx0aGlzLlVzZXJbJ2xvZ2luJ10pDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goImh0dHA6Ly9sb2NhbGhvc3Q6NTYwNjMvYXBpL1VzZXJJbWFnZSIsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogIlBVVCIsDQogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBmb3JtZGF0YQ0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgaWYocmVzcG9uc2Uuc3RhdHVzID49MjAwICYmIHJlc3BvbnNlLnN0YXR1cyA8PSAyOTkpew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5Vc2VyID0gYXdhaXQgcmVzcG9uc2UuanNvbigpDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLlVzZXIpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2Uuc3RhdHVzVGV4dCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2Uuc3RhdHVzVGV4dCk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgfQ0KICAgIH0NCg0KfQ0K"},{"version":3,"sources":["User.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA","file":"User.vue","sourceRoot":"src/views/User","sourcesContent":["<template>\r\n    <b-container fluid id=\"userInfo\">\r\n        <b-row v-if=\"User != null\">\r\n            <b-col cols=\"3\">\r\n            </b-col>\r\n            <b-col>\r\n                <h3>Изменение информации о себе </h3>\r\n               <form id=\"postUserData\">\r\n                   <label for=\"postIserDataFirstName\">Имя</label>\r\n                   <input type=\"text\" class=\"form-control\" v-model=\"User['firstName']\" id=\"postIserDataFirstName\">\r\n\r\n                   <label for=\"postIserDataLastName\">Фамилия</label>\r\n                   <input type=\"text\" class=\"form-control\" v-model=\"User['lastName']\" id=\"postIserDataLastName\">\r\n\r\n                    <label for=\"postUserDataLogin\">Логин</label>\r\n                    <input type=\"Login\" class=\"form-control\" v-model=\"User['login']\" id=\"postUserDataLogin\">\r\n\r\n                    <label for=\"postUserDataEmail\">Почта</label>\r\n                    <input type=\"Email\" class=\"form-control\" id=\"postUserDataEmail\" v-model=\"User['email']\">\r\n\r\n                    <label for=\"postUserDataPassWord\">Старый пароль</label>\r\n                    <input type=\"text\" class=\"form-control\" id=\"postUserDataPassWord\" v-model=\"User['password']\" >\r\n\r\n                    <label for=\"postUserDataPassWordTwo\">Новый пароль</label>\r\n                    <input type=\"Password\" class=\"form-control\" id=\"postUserDataPassWordTwo\"  v-model=\"newPassword\" >\r\n\r\n                    <input type=\"file\" @change=\"onFileChange\" />\r\n\r\n                    <b-button type=\"button\" variant=\"secondary\" style=\"margin-top: 5px\" v-on:click=\"SaveUser\" >Сохранить</b-button>\r\n               </form>\r\n            </b-col>\r\n            <b-col cols=\"3\">\r\n                <b-img :src=\"require('../../UserImages/'+User['login']+'/'+User['imagePath'])\"\r\n                 rounded=\"circle\" \r\n                 v-bind=\"mainProps\" \r\n                 style=\"margin-top: 90px \" \r\n                 v-if=\"User['imagePath'] != null\"></b-img>\r\n                <b-img v-bind=\"defaultProps\" rounded=\"circle\" v-if=\"User['imagePath'] == null\"  style=\"margin-top: 90px \"></b-img>\r\n            </b-col>\r\n        </b-row>\r\n    </b-container>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data(){\r\n        return{\r\n            User: null,\r\n            newPassword : \"\",\r\n            file: null,\r\n            mainProps: {width: 200, height: 200},\r\n             defaultProps: { blank: true, blankColor: '#777', width: 200, height: 200 }\r\n        }\r\n    },\r\n    mounted(){\r\n        this.GetUsers()\r\n    },\r\n    methods:{\r\n        async GetUsers(){\r\n            const response = await fetch(\"http://localhost:56063/api/user/\" + sessionStorage.getItem(\"login\"),\r\n            {\r\n                method: \"GET\",\r\n                headers: {\"Accept\": \"application/json\"}\r\n            });\r\n            if(response.status >=200 && response.status <= 299){\r\n                this.User = await response.json()\r\n            }\r\n            else{\r\n                console.log(response.status, response.statusText);\r\n            }\r\n        },\r\n        onFileChange(e) {\r\n            this.file = e.target.files[0];\r\n        },\r\n        async SaveUser(){\r\n            const response = await fetch(\"http://localhost:56063/api/user\", {\r\n                method: \"PUT\",\r\n                headers: { \"Accept\": \"application/json\", \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({\r\n                    Id :this.User['id'],\r\n                    FirstName : this.User['firstName'],\r\n                    LastName: this.User['lastName'],\r\n                    Login: this.User['login'],\r\n                    Genre: this.User['genre'],\r\n                    Email: this.User['email'],\r\n                    Phone: this.User['phone'],\r\n                    Password: this.newPassword == \"\"?this.User['password']:this.newPassword ,\r\n                    ImagePath: null\r\n                })\r\n            });\r\n            if(response.status >=200 && response.status <= 299){\r\n                this.User = await response.json()\r\n                console.log(this.User)\r\n                if(this.file != null){\r\n                    let formdata = new FormData()\r\n                    formdata.append('file',this.file)\r\n                    formdata.append('login',this.User['login'])\r\n                    const response = await fetch(\"http://localhost:56063/api/UserImage\", {\r\n                        method: \"PUT\",\r\n                        body: formdata\r\n                    });\r\n                    if(response.status >=200 && response.status <= 299){\r\n                        this.User = await response.json()\r\n                        console.log(this.User)\r\n                    }\r\n                    else{\r\n                        console.log(response.status, response.statusText);\r\n                    }\r\n                }\r\n            }\r\n            else{\r\n                console.log(response.status, response.statusText);\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n}\r\n</script>"]}]}