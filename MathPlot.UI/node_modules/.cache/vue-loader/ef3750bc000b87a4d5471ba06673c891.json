{"remainingRequest":"C:\\Users\\Admin\\source\\repos\\MathPlot\\MathPlot\\mathplot.ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Admin\\source\\repos\\MathPlot\\MathPlot\\mathplot.ui\\src\\views\\User\\User.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Admin\\source\\repos\\MathPlot\\MathPlot\\mathplot.ui\\src\\views\\User\\User.vue","mtime":1637341616941},{"path":"C:\\Users\\Admin\\source\\repos\\MathPlot\\MathPlot\\mathplot.ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Admin\\source\\repos\\MathPlot\\MathPlot\\mathplot.ui\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Admin\\source\\repos\\MathPlot\\MathPlot\\mathplot.ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Admin\\source\\repos\\MathPlot\\MathPlot\\mathplot.ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgZGF0YSgpew0KICAgICAgICByZXR1cm57DQogICAgICAgICAgICBVc2VyOiBudWxsLA0KICAgICAgICAgICAgbmV3UGFzc3dvcmQgOiAiIiwNCiAgICAgICAgICAgIGZpbGU6IG51bGwsDQogICAgICAgICAgICBpbWdQYXRoOiBudWxsDQogICAgICAgIH0NCiAgICB9LA0KICAgIG1vdW50ZWQoKXsNCiAgICAgICAgdGhpcy5HZXRVc2VycygpDQogICAgfSwNCiAgICBtZXRob2RzOnsNCiAgICAgICAgYXN5bmMgR2V0VXNlcnMoKXsNCiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goImh0dHA6Ly9sb2NhbGhvc3Q6NTYwNjMvYXBpL3VzZXIvIiArIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImxvZ2luIiksDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgbWV0aG9kOiAiR0VUIiwNCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IkFjY2VwdCI6ICJhcHBsaWNhdGlvbi9qc29uIn0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgaWYocmVzcG9uc2Uuc3RhdHVzID49MjAwICYmIHJlc3BvbnNlLnN0YXR1cyA8PSAyOTkpew0KICAgICAgICAgICAgICAgIHRoaXMuVXNlciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuVXNlcikNCiAgICAgICAgICAgICAgICB0aGlzLmltZ1BhdGggPSB0aGlzLlVzZXJbJ2ltYWdlUGF0aCddDQogICAgICAgICAgICAgICAgdGhpcy5pbWdQYXRoLnJlcGxhY2UoU3RyaW5nLmZyb21DaGFyQ29kZSg5MiksICIvIikNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmltZ1BhdGgpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2Uuc3RhdHVzVGV4dCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIG9uRmlsZUNoYW5nZShlKSB7DQogICAgICAgICAgICB0aGlzLmZpbGUgPSBlLnRhcmdldC5maWxlc1swXTsNCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgU2F2ZVVzZXIoKXsNCiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goImh0dHA6Ly9sb2NhbGhvc3Q6NTYwNjMvYXBpL3VzZXIiLCB7DQogICAgICAgICAgICAgICAgbWV0aG9kOiAiUFVUIiwNCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICJBY2NlcHQiOiAiYXBwbGljYXRpb24vanNvbiIsICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIgfSwNCiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7DQogICAgICAgICAgICAgICAgICAgIElkIDp0aGlzLlVzZXJbJ2lkJ10sDQogICAgICAgICAgICAgICAgICAgIEZpcnN0TmFtZSA6IHRoaXMuVXNlclsnZmlyc3ROYW1lJ10sDQogICAgICAgICAgICAgICAgICAgIExhc3ROYW1lOiB0aGlzLlVzZXJbJ2xhc3ROYW1lJ10sDQogICAgICAgICAgICAgICAgICAgIExvZ2luOiB0aGlzLlVzZXJbJ2xvZ2luJ10sDQogICAgICAgICAgICAgICAgICAgIEdlbnJlOiB0aGlzLlVzZXJbJ2dlbnJlJ10sDQogICAgICAgICAgICAgICAgICAgIEVtYWlsOiB0aGlzLlVzZXJbJ2VtYWlsJ10sDQogICAgICAgICAgICAgICAgICAgIFBob25lOiB0aGlzLlVzZXJbJ3Bob25lJ10sDQogICAgICAgICAgICAgICAgICAgIFBhc3N3b3JkOiB0aGlzLm5ld1Bhc3N3b3JkLA0KICAgICAgICAgICAgICAgICAgICBJbWFnZVBhdGg6IG51bGwNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBpZihyZXNwb25zZS5zdGF0dXMgPj0yMDAgJiYgcmVzcG9uc2Uuc3RhdHVzIDw9IDI5OSl7DQogICAgICAgICAgICAgICAgdGhpcy5Vc2VyID0gYXdhaXQgcmVzcG9uc2UuanNvbigpDQogICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5Vc2VyKQ0KICAgICAgICAgICAgICAgIGlmKHRoaXMuZmlsZSAhPSBudWxsKXsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKCkNCiAgICAgICAgICAgICAgICAgICAgZm9ybWRhdGEuYXBwZW5kKCdmaWxlJyx0aGlzLmZpbGUpDQogICAgICAgICAgICAgICAgICAgIGZvcm1kYXRhLmFwcGVuZCgnbG9naW4nLHRoaXMuVXNlclsnbG9naW4nXSkNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgiaHR0cDovL2xvY2FsaG9zdDo1NjA2My9hcGkvVXNlckltYWdlIiwgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiUFVUIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IGZvcm1kYXRhDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5zdGF0dXMgPj0yMDAgJiYgcmVzcG9uc2Uuc3RhdHVzIDw9IDI5OSl7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlVzZXIgPSBhd2FpdCByZXNwb25zZS5qc29uKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuVXNlcikNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS5zdGF0dXNUZXh0KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2V7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS5zdGF0dXNUZXh0KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICB9DQogICAgfQ0KDQp9DQo="},{"version":3,"sources":["User.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA","file":"User.vue","sourceRoot":"src/views/User","sourcesContent":["<template>\r\n    <b-container fluid>\r\n        <b-row v-if=\"User != null\">\r\n            <b-col cols=\"3\">\r\n            </b-col>\r\n            <b-col>\r\n                <h3>Изменение информации о себе </h3>\r\n               <form id=\"postUserData\">\r\n                   <label for=\"postIserDataFirstName\">Имя</label>\r\n                   <input type=\"text\" class=\"form-control\" v-model=\"User['firstName']\" id=\"postIserDataFirstName\">\r\n\r\n                   <label for=\"postIserDataLastName\">Фамилия</label>\r\n                   <input type=\"text\" class=\"form-control\" v-model=\"User['lastName']\" id=\"postIserDataLastName\">\r\n\r\n                    <label for=\"postUserDataLogin\">Логин</label>\r\n                    <input type=\"Login\" class=\"form-control\" v-model=\"User['login']\" id=\"postUserDataLogin\">\r\n\r\n                    <label for=\"postUserDataEmail\">Почта</label>\r\n                    <input type=\"Email\" class=\"form-control\" id=\"postUserDataEmail\" v-model=\"User['email']\">\r\n\r\n                    <label for=\"postUserDataPassWord\">Старый пароль</label>\r\n                    <input type=\"text\" class=\"form-control\" id=\"postUserDataPassWord\" v-model=\"User['password']\" >\r\n\r\n                    <label for=\"postUserDataPassWordTwo\">Новый пароль</label>\r\n                    <input type=\"Password\" class=\"form-control\" id=\"postUserDataPassWordTwo\"  v-model=\"newPassword\" >\r\n\r\n                    <input type=\"file\" @change=\"onFileChange\" />\r\n\r\n                    <b-button type=\"button\" variant=\"secondary\" style=\"margin-top: 5px\" v-on:click=\"SaveUser\" >Сохранить</b-button>\r\n               </form>\r\n            </b-col>\r\n            <b-col cols=\"3\">\r\n                <b-img :src=\"require(imgPath)\" alt=\"Image 3\"></b-img>\r\n            </b-col>\r\n        </b-row>\r\n    </b-container>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data(){\r\n        return{\r\n            User: null,\r\n            newPassword : \"\",\r\n            file: null,\r\n            imgPath: null\r\n        }\r\n    },\r\n    mounted(){\r\n        this.GetUsers()\r\n    },\r\n    methods:{\r\n        async GetUsers(){\r\n            const response = await fetch(\"http://localhost:56063/api/user/\" + sessionStorage.getItem(\"login\"),\r\n            {\r\n                method: \"GET\",\r\n                headers: {\"Accept\": \"application/json\"}\r\n            });\r\n            if(response.status >=200 && response.status <= 299){\r\n                this.User = await response.json()\r\n                console.log(this.User)\r\n                this.imgPath = this.User['imagePath']\r\n                this.imgPath.replace(String.fromCharCode(92), \"/\")\r\n                console.log(this.imgPath)\r\n            }\r\n            else{\r\n                console.log(response.status, response.statusText);\r\n            }\r\n        },\r\n        onFileChange(e) {\r\n            this.file = e.target.files[0];\r\n        },\r\n        async SaveUser(){\r\n            const response = await fetch(\"http://localhost:56063/api/user\", {\r\n                method: \"PUT\",\r\n                headers: { \"Accept\": \"application/json\", \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({\r\n                    Id :this.User['id'],\r\n                    FirstName : this.User['firstName'],\r\n                    LastName: this.User['lastName'],\r\n                    Login: this.User['login'],\r\n                    Genre: this.User['genre'],\r\n                    Email: this.User['email'],\r\n                    Phone: this.User['phone'],\r\n                    Password: this.newPassword,\r\n                    ImagePath: null\r\n                })\r\n            });\r\n            if(response.status >=200 && response.status <= 299){\r\n                this.User = await response.json()\r\n                console.log(this.User)\r\n                if(this.file != null){\r\n                    let formdata = new FormData()\r\n                    formdata.append('file',this.file)\r\n                    formdata.append('login',this.User['login'])\r\n                    const response = await fetch(\"http://localhost:56063/api/UserImage\", {\r\n                        method: \"PUT\",\r\n                        body: formdata\r\n                    });\r\n                    if(response.status >=200 && response.status <= 299){\r\n                        this.User = await response.json()\r\n                        console.log(this.User)\r\n                    }\r\n                    else{\r\n                        console.log(response.status, response.statusText);\r\n                    }\r\n                }\r\n            }\r\n            else{\r\n                console.log(response.status, response.statusText);\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n}\r\n</script>"]}]}